nh√©t v√†o ch·ªó n√†o th·∫±ng ngu   <!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Nh·∫≠t K√Ω L√†m C·ªët - Bii & Qu√¨n</title>
  <link rel="manifest" href="manifest.json">
  <style>
    :root {
      --pink: #ff6b9d;
      --light-pink: #ffb8c6;
      --brown: #5a3d2b;
      --glass: rgba(255, 255, 255, 0.23);
      --glass-border: rgba(255, 255, 255, 0.3);
    }
    
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: url('https://i.postimg.cc/23RNjWQb/WIN-20241126-17-30-01-Pro.jpg') no-repeat center center fixed;
      background-size: cover;
      color: var(--brown);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      -webkit-text-size-adjust: 100%;
      cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'><path fill='%23ff6b9d' d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/></svg>"), auto;
    }
    
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.15);
      z-index: -1;
    }
    
    .container {
      width: 100%;
      max-width: 414px;
      margin: 0 auto;
      padding: 15px;
      position: relative;
      z-index: 1;
    }
    
    .love-counter, .memory-content {
      background: var(--glass);
      border-radius: 15px;
      padding: 20px;
      margin: 20px auto;
      width: 100%;
      box-shadow: 0 8px 32px rgba(255, 105, 157, 0.2);
      text-align: center;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      border: 1px solid var(--glass-border);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
    }
    
    .love-counter:hover, .memory-content:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(255, 105, 157, 0.3);
    }
   
    .counter-display {
      font-size: 1.8rem;
      color: var(--pink);
      margin: 15px 0;
      font-weight: bold;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
      line-height: 1.4;
    }
    
    .counter-unit {
      font-size: 0.95rem;
      color: var(--brown);
      display: block;
      margin-top: 5px;
    }
    
    .memory-buttons {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin: 25px 0;
      padding: 0 5px;
    }
    
    .memory-btn {
      background: linear-gradient(135deg, var(--pink), #f9809f);
      color: white;
      border: none;
      padding: 12px 8px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.4s ease;
      box-shadow: 0 4px 15px rgba(255, 105, 157, 0.3);
      position: relative;
      overflow: hidden;
      white-space: nowrap;
      min-width: 0;
    }
    
    .memory-btn:hover {
      background: linear-gradient(135deg, #f9809f, var(--pink));
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 6px 20px rgba(255, 105, 157, 0.4);
    }
    
    .memory-btn::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transform: translateX(-100%);
      transition: 0.6s;
    }
    
    .memory-btn:hover::after {
      transform: translateX(100%);
    }
    
    .memory-content {
      display: none;
      animation: fadeIn 0.5s;
      font-size: 1.15rem;
      line-height: 1.6;
      text-align: left;
      position: relative;
    }
    #greeting {
  font-size: 1.4rem;
  color: var(--pink);
  font-weight: bold;
  margin-bottom: 12px;
}
    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--pink);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
     @keyframes fall {
  0% {
    transform: translateY(-50px);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh);
    opacity: 0;
  }
}
    
    .memory-content h2 {
      color: var(--pink);
      margin-top: 0;
      border-bottom: 2px dashed var(--light-pink);
      padding-bottom: 8px;
      font-size: 1.35rem;
      transition: all 0.3s;
    }
    
    .memory-content:hover h2 {
      letter-spacing: 0.5px;
    }
    
    footer {
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      color: var(--brown);
    }
    
    footer p {
      font-size: 1.45rem;
      font-weight: 600;
      color: var(--pink);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
      margin: 8px 0;
    }
    
    .cat-paw {
      font-size: 1.4rem;
      margin: 8px;
      display: inline-block;
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    
    /* Hi·ªáu ·ª©ng hoa r∆°i */
    .petal {
      position: fixed;
      background-size: contain;
      z-index: 999;
      pointer-events: none;
      animation: falling linear infinite;
      font-size: 1.3rem;
      opacity: 0.8;
    }
    
    @keyframes falling {
      0% {
        transform: translate(0, -10vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.8;
      }
      100% {
        transform: translate(calc(var(--random-x) * 8vw), 100vh) rotate(360deg);
        opacity: 0;
      }
    }
    
    /* Floating hearts */
    .floating-heart {
      position: absolute;
      font-size: 1.1rem;
      color: var(--pink);
      animation: float 6s ease-in-out infinite;
      opacity: 0;
      z-index: 0;
    }
    
    @keyframes float {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.7;
      }
      90% {
        opacity: 0.7;
      }
      100% {
        transform: translateY(-80px) rotate(360deg);
        opacity: 0;
      }
    }
    
    /* Hi·ªáu ·ª©ng th·ªü cho tr√°i tim */
    #loveDays {
      display: inline-block;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    
    /* T·ªëi ∆∞u cho mobile */
    @media (max-width: 414px) {
      .memory-buttons {
        gap: 10px;
      }
      
      .memory-btn {
        padding: 12px 5px;
        font-size: 0.9rem;
      }
      
      .love-counter, .memory-content {
        padding: 18px;
      }
      
      .petal {
        font-size: 1.1rem;
      }
    }
    
    /* T·ªëi ∆∞u cho Safari */
    @supports (-webkit-touch-callout: none) {
      body {
        -webkit-overflow-scrolling: touch;
        height: -webkit-fill-available;
      }
    }
    
    /* Style cho th∆∞ t√¨nh */
    #loveLetter {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 15px;
      z-index: 1000;
      width: 80%;
      max-width: 400px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    #loveLetter textarea {
      width: 100%;
      height: 150px;
      margin-bottom: 10px;
      border: 1px solid var(--light-pink);
      border-radius: 10px;
      padding: 10px;
    }
    
    /* N√∫t nh·∫°c */
  .music-controls {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 100;
}

.music-btn {
  background: var(--pink);
  color: white;
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  font-size: 1.2rem;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}
  </style>
</head>
<body>
  <!-- N√∫t nh·∫°c YouTube -->
<div class="music-controls">
  <button class="music-btn" id="musicBtn">üéµ</button>
</div>
<div id="ytPlayer" style="width:0; height:0; opacity:0; position:absolute;"></div>
  <!-- Floating hearts background -->
  <div id="floating-hearts"></div>
  
  <!-- Flower petals -->
  <div id="flower-petals"></div>
  
  <!-- Love letter popup -->
  <div id="loveLetter">
    <textarea placeholder="Vi·∫øt ƒëi·ªÅu g√¨ ƒë√≥ ng·ªçt ng√†o..."></textarea>
    <button class="memory-btn" onclick="sendLetter()">G·ª≠i</button>
    <button class="memory-btn" onclick="document.getElementById('loveLetter').style.display='none'">ƒê√≥ng</button>
  </div>

  <div class="container">
   <div class="love-counter" id="love-counter">
      <h2>‚ù§Ô∏è H√†nh tr√¨nh c·ªßa ch√∫ng ta ‚ù§Ô∏è</h2>
      <div class="counter-display">
        <span id="loveDays">267</span> ng√†y
        <div class="counter-unit" id="detailedCounter">8 th√°ng ¬∑ 2 tu·∫ßn ¬∑ 9 gi·ªù ¬∑ 47 ph√∫t ¬∑ 49 gi√¢y</div>
      </div>
      <button class="memory-btn" onclick="showLoveLetter()" style="margin-top: 15px;">üíå Vi·∫øt th∆∞ t√¨nh</button>
    </div>

    <!-- G·ª≠i ·∫£nh cho ng∆∞·ªùi y√™u -->
<div style="text-align: center; margin-top: 20px;">
 <div style="margin-top: 20px; text-align: center;">
  <input type="file" id="imageInput" accept="image/*">
  <input type="text" id="captionInput" placeholder="Vi·∫øt caption g·ª≠i ng∆∞·ªùi iu" style="margin-top: 8px; padding: 6px; width: 90%; border-radius: 8px; border: 1px solid var(--light-pink);"><br>
  <button class="memory-btn" onclick="uploadImage()" style="margin-top: 12px;">üì§ G·ª≠i ·∫£nh cho ng∆∞·ªùi y√™u</button>
</div>
</div>

<!-- N∆°i hi·ªÉn th·ªã ·∫£nh -->
<div id="photo-feed" style="margin-top: 20px; text-align: center;"></div>

    
    <div class="memory-buttons">
      <button class="memory-btn" onclick="changeMemory('start', 'https://i.postimg.cc/23RNjWQb/WIN-20241126-17-30-01-Pro.jpg')">Kh·ªüi ƒë·∫ßu</button>
      <button class="memory-btn" onclick="changeMemory('first-kiss', 'https://i.postimg.cc/XNgffWGF/998694b2-ed9f-4564-85ce-fd0147bc44a7.jpg')">N·ª• h√¥n ƒë·∫ßu</button>
      <button class="memory-btn" onclick="changeMemory('gifts', 'https://i.postimg.cc/wTThFrLr/8379c640-a8dc-4a28-b3c5-4ce3571938e1.jpg')">Qu√† t·∫∑ng</button>
      <button class="memory-btn" onclick="changeMemory('places', 'https://i.postimg.cc/SRL9J8X2/5148cedd-2d79-416a-b694-e0d365694cbd.jpg')">N∆°i ƒë·∫∑c bi·ªát</button>
      <button class="memory-btn" onclick="changeMemory('micchan', 'https://i.postimg.cc/Bnj2f1hc/aeb64a98-01e8-401e-9ae2-26aa07029764.jpg')">Micchan</button>
      <button class="memory-btn" onclick="changeMemory('feelings', 'https://i.postimg.cc/WzS0TmLS/5078b8d2-543d-4b17-aa39-28e2d3f1ddb3.jpg')">T√¨nh c·∫£m hi·ªán t·∫°i</button>
    </div>

    <div id="start" class="memory-content">
      <button class="close-btn" onclick="this.parentElement.style.display='none'">√ó</button>
      <h2>üåü Kh·ªüi ƒë·∫ßu ƒë√°ng nh·ªõ</h2>
      <p><strong>Ng√†y y√™u nhau:</strong> 17/10/2024</p>
      <p>Ng√†y Qu√¨n b·∫£o bii v·ªÅ t·ªè t√¨nh s·∫Ω ƒë·ªìng √Ω nh∆∞ng r·ªìi l√∫c chu·∫©n b·ªã n√≥i ra qu√¨n l·∫°i mu·ªën ch·∫°y d√¨a kkkk</p>
      <p>Ng√†y m√† bii t·ªßn v·ªõi Qu√¨n ƒë√£ ch√≠nh th·ª©c b∆∞·ªõc v√†o cu·ªôc h√†nh tr√¨nh n√†y.</p>
      <p><strong>N∆°i t·ªè t√¨nh:</strong> Gh·∫ø mu·ªói ch√≠ch, c√¥ng vi√™n</p>
      <p>C√≥ l·∫Ω ƒë√¢y l√† n∆°i ƒë·∫∑c bi·ªát nh·∫•t ƒë·ªëi v·ªõi bi,m√¨nh hay ng·ªìi ch·ªó n√†y v√†o nh·ªØng l·∫ßn ƒëi ch∆°i sau n√†y,c≈©ng l√† n∆°i m·ªçi th·ª© b·∫Øt ƒë·∫ßu.</p>
      <p>V√† c≈©ng nh·ªØng l·∫ßn b·ªçn m√¨nh c√≥ chuy·ªán...ƒë√¢y c≈©ng l√† n∆°i bi ng·ªìi,hy v·ªçng bi·∫øt ƒë√¢u qu√¨n s·∫Ω t·ªõi.</p>
    </div>
    
    <div id="first-kiss" class="memory-content">
      <button class="close-btn" onclick="this.parentElement.style.display='none'">√ó</button>
      <h2>üíã N·ª• h√¥n ƒë·∫ßu</h2>
      <p>Ch√≠nh l√† kho·∫£nh kh·∫Øc "l√£ng m·∫°n" t·∫°i c√¥ng vi√™n. C·∫£m gi√°c nh∆∞ th·ªùi gian ng·ª´ng l·∫°i, ch·ªâ c√≤n hai c·ªët kkk</p>
      <p>L·∫ßn ƒë·∫ßu bi ch·∫°m m√¥i qu√¨n c√≥ l·∫Ω l√† l·∫ßn ƒë√£ tr·ªÖ nh∆∞ng h√¥m ·∫•y bi ch∆∞a ƒë∆∞·ª£c hun c√°i n√†o n√™n bi gi·ªØ qu√¨n l·∫°i=))xin m√£ii.</p>
      <h3>K·ª∑ ni·ªám ƒë√°ng nh·ªõ:</h3>
      <p>L·∫ßn ƒë·∫ßu "trao nhau" t·∫°i Corgi Homestay.</p>
      <p>C·∫£m ∆°n Qu√¨n, v√¨ ƒë√£ ch·ªçn bi,tin t∆∞·ªüng v√† trao cho bi ƒëi·ªÅu tuy·ªát v·ªùi ·∫•y.</p>
      <p>V√†o ƒë√™m sinh nh·∫≠t,d√π Qu√¨n "t·ªõi th√°ng" nh∆∞ng v·∫´n c·ªë g·∫Øng v√¨ s·ª£ Bii bu·ªìn,m·∫∑c d√π vi·ªác ƒë·∫•y s·∫Ω c√≥ ·∫£nh h∆∞·ªüng x·∫•u t·ªõi qu√¨n(Bii c≈©ng t√≠nh hok ·∫•y r√πi m√† bi l·ª°.....·ª±a)</p>
      <p>Y√™u qu√¨n nhi·ªÅu h·∫π h·∫π üåßÔ∏èüéÇüíè</p>
    </div>
    <div id="gifts" class="memory-content">
      <button class="close-btn" onclick="this.parentElement.style.display='none'">√ó</button>
      <h2>üéÅ M√≥n qu√† k·ª∑ ni·ªám</h2>
      <p>Nh·ªØng m√≥n qu√† ch·ª©a ƒë·ª±ng t√¨nh c·∫£m s√¢u s·∫Øc c·ªßa Qu√¨n d√†nh cho Bii:</p>
      <ul>
        <li>KhƒÉn len ƒëan tay</li>
        <li>M≈© len ƒëan tay</li>
        <li>√Åo thun</li>
        <li>C·ªëc n∆∞·ªõc</li>
      </ul>
      <p>M·ªói m√≥n qu√† bi ƒë·ªÅu gi·ªØ g√¨n s√† s·ª≠ d·ª•ng 1 c√°ch nhi·ªÅu v√¥ k·ªÉ. üíù</p>
      <p>S·∫Øp t·ªõi c√≥c√≥ v·∫ª em bii s·∫Ω nh·∫≠n ƒë∆∞·ª£c m√≥n qu√† kh√≥ to,theo nh∆∞ v√†i ƒëi·ªÅu qu√¨n ti·∫øt l·ªô.</p>
    </div>
    <div id="places" class="memory-content">
      <button class="close-btn" onclick="this.parentElement.style.display='none'">√ó</button>
      <h2>üè° N∆°i quan tr·ªçng</h2>
      <p><strong>Ch·ªën Homestay</strong> - n∆°i t√¨nh y√™u tr·ªü n√™n th·∫≠t tr·ªçn v·∫πn.N∆°i hai m√¨nh ƒë√£ c√≥ 1 ƒë√™m sinh nh·∫≠t cho qu√¨n c√≥ l·∫Ω l√† tuy·ªát v·ªùi.</p>
      <p>N∆°i hai ng∆∞·ªùi c√≥ nh·ªØng kho·∫£nh kh·∫Øc ƒë√°ng nh·ªõ nh·∫•t, t·ª´ nh·ªØng l·∫ßn ƒë·∫ßu ti√™n ƒë·∫øn nh·ªØng ƒë√™m t√¢m s·ª± d∆∞·ªõi √°nh n·∫øn. üåà</p>
    </div>
    <div id="micchan" class="memory-content">
      <button class="close-btn" onclick="this.parentElement.style.display='none'">√ó</button>
      <h2>üòª Micchan (m√®o bi·ªÉn)</h2>
      <p>Ch·∫Øc bi m·ªõi g·∫∑p ·∫ªm c√≥ 1 l·∫ßn.</p>
      <p>H√¨nh nh∆∞ ƒë√¢y l√† b√© qu√¨n l·∫•y v·ªÅ l√∫c m√¨nh ra bi·ªÉn nh·ªâ</p>
    </div>
    <div id="feelings" class="memory-content">
      <button class="close-btn" onclick="this.parentElement.style.display='none'">√ó</button>
      <h2>üíû T√¨nh c·∫£m hi·ªán t·∫°i</h2>
      <p>Chuy·ªán c·ªßa m√¨nh l√™n xu·ªëng ,chuy·ªán n√†y chuy·ªán kia nhi·ªÅu nh∆∞ng m√† bi vui v√¨ b√¢y gi·ªù bi v·ªõi qu√¨n v·∫´n ch·ªçn ti·∫øp t·ª•c</p>
      <p>Qu√¨n tha th·ª© cho bi nhi·ªÅu ƒëi·ªÅu,bii c·ªßm ∆°n Qu√¨n.üíñüíñ</p>
      <p>C·∫£m x√∫c c·ªßa Bii v·∫´n ƒëong ƒë·∫ßy m·ªói ng√†y h·∫π h·∫π. üòòüíñ</p>
      <p>Bi mong 2 ƒë·ª©a m√¨nh s·∫Ω c√πng nhau ƒë·∫≠u ƒë·∫°i h·ªçc.Bi khoa h·ªçc t·ª± nhi√™n, Qu√¨n d∆∞·ª£c h·ªçc.M√¨nh s·∫Ω kh√¥ng ph·∫£i y√™u xa n·ªØa.NƒÉm nay c√πng nhau c·ªë g·∫Øng nhan</p>
    </div>
  </div>
    
  </div>

  <footer>
    <div class="cat-paw">üêæ</div>
    <p>ƒê∆∞·ª£c t·∫°o v·ªõi t·∫•t c·∫£ t√¨nh y√™u d√†nh cho Bii & Qu√¨n</p>
    <p><em>- Micchan ph√™ duy·ªát -</em></p>
  </footer>




  <script>
    // B·ªô ƒë·∫øm th·ªùi gian
    const startDate = new Date("2024-10-17T00:00:00");
    
    function updateCounter() {
      const now = new Date();
      const diff = now - startDate;
      
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const months = Math.floor(days / 30.44);
      const weeks = Math.floor((days % 365) / 7);
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      document.getElementById("loveDays").innerText = days;
   document.getElementById("detailedCounter").innerText = 
  `${months} th√°ng ¬∑ ${weeks} tu·∫ßn ¬∑ ${hours} gi·ªù ¬∑ ${minutes} ph√∫t ¬∑ ${seconds} gi√¢y`;

      // Hi·ªáu ·ª©ng confetti khi ƒë·∫øn m·ªëc ƒë·∫∑c bi·ªát
      if ([100, 200, 365].includes(days)) {
        createConfetti();
      }
    }
    
    setInterval(updateCounter, 1000);
    updateCounter();
   </script>

   <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
  <script src="firebase.js"></script>
 <script>
    // Chuy·ªÉn ƒë·ªïi gi·ªØa c√°c k·ª∑ ni·ªám
    let isTransitioning = false;
    function changeMemory(id, bgUrl) {
      if (isTransitioning) return;
      isTransitioning = true;
      
      document.querySelectorAll('.memory-content').forEach(mem => {
        mem.style.display = 'none';
      });
      
      const mem = document.getElementById(id);
      if (mem) {
        mem.style.display = 'block';
        mem.style.animation = 'fadeIn 0.5s';
      }
      
      document.body.style.transition = 'background-image 0.8s ease-in-out';
      document.body.style.backgroundImage = `url('${bgUrl}')`;

      
      createClickHearts();
      setTimeout(() => { isTransitioning = false; }, 800);
    }

    // Hi·ªáu ·ª©ng hoa r∆°i
    function createPetals() {
      const petals = ['üå∏', 'üåπ', 'üíÆ', 'üèµÔ∏è', 'üå∫', 'üåª', 'üåº', 'üå∑'];
      const container = document.getElementById('flower-petals');
      const maxPetals = 10;
      
      if (document.querySelectorAll('.petal').length < maxPetals) {
        const petal = document.createElement('div');
        petal.className = 'petal';
        petal.innerHTML = petals[Math.floor(Math.random() * petals.length)];
        petal.style.left = Math.random() * 100 + 'vw';
        petal.style.fontSize = (Math.random() * 12 + 10) + 'px';
        petal.style.setProperty('--random-x', Math.random() * 2 - 1);
        petal.style.animationDuration = (Math.random() * 8 + 8) + 's';
        petal.style.animationDelay = Math.random() * 5 + 's';
        container.appendChild(petal);
        
        setTimeout(() => {
          petal.remove();
        }, parseFloat(petal.style.animationDuration) * 1000);
      }
      
      setTimeout(createPetals, 300);
    }
    
    // Hi·ªáu ·ª©ng tim n·ªïi
    function createFloatingHearts() {
      const container = document.getElementById('floating-hearts');
      const hearts = ['‚ù§Ô∏è', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú', 'ü§é', 'üñ§', 'üíñ', 'üíó', 'üíò', 'üíù'];
      
      setInterval(() => {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.bottom = '0';
        heart.style.animationDuration = (Math.random() * 4 + 4) + 's';
        container.appendChild(heart);
        
        setTimeout(() => {
          heart.remove();
        }, 5000);
      }, 1000);
    }
    
    // Hi·ªáu ·ª©ng tim khi click
    function createClickHearts() {
      const hearts = ['‚ù§Ô∏è', 'üíñ', 'üíó', 'üíò'];
      const heart = document.createElement('div');
      heart.className = 'floating-heart';
      heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
      heart.style.left = '50%';
      heart.style.bottom = '20%';
      heart.style.fontSize = '1.8rem';
      heart.style.animationDuration = '3s';
      document.getElementById('floating-hearts').appendChild(heart);
      
      setTimeout(() => {
        heart.remove();
      }, 3000);
    }
    
    // Hi·ªáu ·ª©ng confetti
    function createConfetti() {
      const emojis = ['üéâ', 'üéä', '‚ú®', 'üíñ', 'üå∏'];
      for (let i = 0; i < 20; i++) {
        const confetti = document.createElement('div');
        confetti.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
        confetti.style.position = 'fixed';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.top = '-50px';
        confetti.style.fontSize = (Math.random() * 20 + 15) + 'px';
        confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
        confetti.style.zIndex = '9999';
        document.body.appendChild(confetti);
        
        setTimeout(() => {
          confetti.remove();
        }, 5000);
      }
    }
    
    // Th∆∞ t√¨nh
    function showLoveLetter() {
      document.getElementById('loveLetter').style.display = 'block';
    }
    
    function sendLetter() {
      alert('Emm biiiiii y√™u Qu√¨nnnn');
      document.getElementById('loveLetter').style.display = 'none';
    }
    
    // Hi·ªáu ·ª©ng tim khi ch·∫°m tr√™n mobile
    document.addEventListener('touchstart', (e) => {
      const heart = document.createElement('div');
      heart.className = 'floating-heart';
      heart.innerHTML = '‚ù§Ô∏è';
      heart.style.left = e.touches[0].clientX + 'px';
      heart.style.top = e.touches[0].clientY + 'px';
      heart.style.animation = 'float 3s ease-out';
      heart.style.fontSize = '2rem';
      document.getElementById('floating-hearts').appendChild(heart);
      
      setTimeout(() => {
        heart.remove();
      }, 3000);
    });
    <script>
    // Kh·ªüi t·∫°o khi trang load
    window.onload = function() {
      changeMemory('start', 'https://i.postimg.cc/23RNjWQb/WIN-20241126-17-30-01-Pro.jpg');
      createPetals();
      createFloatingHearts();
 let isPlaying = false;
const ytPlayer = document.getElementById('ytPlayer');
const musicButton = document.getElementById('musicBtn');

musicButton.addEventListener('click', () => {
  if (!isPlaying) {
    if (player && typeof player.playVideo === 'function') {
      player.unMute();
      player.playVideo();
      isPlaying = true;
      musicButton.textContent = 'üîá';
    }
  } else {
    if (player && typeof player.pauseVideo === 'function') {
      player.pauseVideo();
      isPlaying = false;
      musicButton.textContent = 'üéµ';
    }
  }
});


      
      // Th√™m hi·ªáu ·ª©ng khi ch·∫°m v√†o n√∫t tr√™n mobile
      document.querySelectorAll('.memory-btn').forEach(btn => {
        btn.addEventListener('touchstart', () => {
          btn.style.transform = 'scale(0.96)';
        });
        btn.addEventListener('touchend', () => {
          btn.style.transform = 'scale(1)';
        });
      });

    };
   
  </script>
 <script src="https://www.youtube.com/iframe_api"></script>

<script>
  let player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('ytPlayer', {
      height: '0',
      width: '0',
      videoId: 'dcWTrQ48mms',
      playerVars: {
        autoplay: 0,
        loop: 1,
        playlist: 'dcWTrQ48mms',
        mute: 1
      },
      events: {
        onReady: onPlayerReady
      }
    });
  }

  function onPlayerReady(event) {
    const btn = document.getElementById('musicBtn');
    let isPlaying = false;
    btn.addEventListener('click', () => {
      if (!isPlaying) {
        player.unMute();
        player.playVideo();
        btn.textContent = 'üîá';
      } else {
        player.pauseVideo();
        btn.textContent = 'üéµ';
      }
      isPlaying = !isPlaying;
    });
  }
</script>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').then(() => {
      console.log("Service Worker ƒëƒÉng k√Ω th√†nh c√¥ng");
    }).catch(err => {
      console.error("ƒêƒÉng k√Ω Service Worker th·∫•t b·∫°i:", err);
    });
  }
</script>

<script>

  window.setUser = function (name) {
    localStorage.setItem("user", name);
    localStorage.setItem("hasReloaded", "yes"); // ƒê√°nh d·∫•u ƒë√£ reload
    document.getElementById("choose-user").style.display = "none";
  }



  // Auto update PWA when there's new version//////////////////////
 if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js').then((registration) => {
    registration.onupdatefound = () => {
      const newWorker = registration.installing;
      newWorker.addEventListener('statechange', () => {
        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
          console.log("‚ö° C√≥ b·∫£n c·∫≠p nh·∫≠t m·ªõi! Reloading...");
          newWorker.postMessage({ action: 'skipWaiting' }); // Cho worker m·ªõi nh·∫£y v√†o lu√¥n
        }
      });
    };
  });



  // Khi worker m·ªõi chi·∫øm quy·ªÅn xong th√¨ reload///////////////////////
  navigator.serviceWorker.addEventListener('controllerchange', () => {
    console.log("üîÅ Worker m·ªõi chi·∫øm quy·ªÅn, reload web...");
    window.location.reload();
  });
}
      }
    });
  };
});

// Khi SW m·ªõi ƒë√£ k√≠ch ho·∫°t v√† chi·∫øm quy·ªÅn, th√¨ reload trang///////////////////////
navigator.serviceWorker.addEventListener('controllerchange', () => {
  console.log("üîÅ SW ƒë√£ chi·∫øm quy·ªÅn, reload trang...");
  window.location.reload();
});
          }
        };
      };
    });
  }




// Hi·ªÉn th·ªã l·ªùi ch√†o tr√™n ƒë·∫øm ng√†y y√™u (·ªïn ƒë·ªãnh h∆°n)///////////////////////
document.addEventListener("DOMContentLoaded", () => {
  setTimeout(() => {
    const currentUser = localStorage.getItem("user");
    const loveCounter = document.getElementById("love-counter");

    if (!loveCounter) return;

    // X√≥a greeting c≈© n·∫øu c√≥ (tr√°nh l·ªói ch√®n tr√πng)
    const oldGreeting = document.getElementById("greeting");
    if (oldGreeting) oldGreeting.remove();

    const greetingDiv = document.createElement("div");
    greetingDiv.id = "greeting";
   greetingDiv.style.cssText = `
  text-align: center;
  font-size: 1.2rem;
  font-weight: bold;
  color: var(--pink);
  margin-bottom: 8px;
`;


    if (currentUser === "bii") {
      greetingDiv.textContent = "H·∫ø l√¥ Bii üê∂";
    } else if (currentUser === "quin") {
      greetingDiv.textContent = "H·∫ø l√¥ Qu√¨n üéÄ";
    }
    const title = loveCounter.querySelector("h2");
    loveCounter.insertBefore(greetingDiv, title); // CH√àN TR√äN h2
  }, 100);
});

</script>
 


<script>
 

  auth.onAuthStateChanged((user) => {
    if (user) {
      const name = user.displayName || "B·∫°n y√™u";

      let greetingDiv = document.getElementById("greeting");
      if (!greetingDiv) {
        greetingDiv = document.createElement("div");
        greetingDiv.id = "greeting";
      }

      greetingDiv.textContent = `H·∫ø l√¥ ${name} ü•∞`;
      greetingDiv.style.cssText = `
        text-align: center;
        font-size: 1.2rem;
        font-weight: bold;
        color: var(--pink);
        margin-bottom: 8px;
      `;

      const loveCounter = document.querySelector("#love-counter h2");
      if (loveCounter && !document.getElementById("greeting")) {
        loveCounter.parentElement.insertBefore(greetingDiv, loveCounter);
      }
    } else {
      signIn();
    }
  });

  function signIn() {
    const provider = new firebase.auth.GoogleAuthProvider();
   auth.signInWithRedirect(provider).catch((error) => {
      alert("ƒêƒÉng nh·∫≠p th·∫•t b·∫°i: " + error.message);
    });
  }
 

  // G·ª≠i ·∫£nh
    function uploadImage() {
      const file = document.getElementById("imageInput").files[0];
      const caption = document.getElementById("captionInput").value.trim();
      if (!file) return alert("Ch·ªçn ·∫£nh tr∆∞·ªõc nha bae üòò");

      const userId = auth.currentUser ? auth.currentUser.uid : "anonymous";
      const fileRef = storage.ref().child(`photos/${userId}_${Date.now()}_${file.name}`);

      fileRef.put(file).then(snapshot => snapshot.ref.getDownloadURL())
        .then(url => {
          return db.collection("photos").add({
            url,
            caption,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
          });
        })
        .then(() => {
          alert("·∫¢nh ƒë√£ g·ª≠i cho ng∆∞·ªùi y√™u ‚ù§Ô∏è");
          loadPhotos();
          document.getElementById("captionInput").value = "";
          document.getElementById("imageInput").value = "";
        })
        .catch(err => alert("G·ª≠i ·∫£nh fail: " + err.message));
    }

    function loadPhotos() {
      const photoFeed = document.getElementById("photo-feed");
      photoFeed.innerHTML = "ƒêang t·∫£i ·∫£nh...";
      db.collection("photos").orderBy("timestamp", "desc").get().then(snapshot => {
        let html = "";
        snapshot.forEach(doc => {
          const data = doc.data();
          html += `
            <div style="margin-bottom: 20px;">
              <img src="${data.url}" style="max-width: 200px; margin: 10px; border-radius: 12px;" />
              ${data.caption ? `<div style="font-style: italic; margin-top: 5px; color: #555;">${data.caption}</div>` : ""}
            </div>
          `;
        });
        photoFeed.innerHTML = html || "Ch∆∞a c√≥ ·∫£nh n√†o ƒë∆∞·ª£c g·ª≠i üíî";
      });
    }

     // G·ª≠i c·∫£m x√∫c
    function sendEmotion() {
      const content = document.getElementById("emotionInput").value.trim();
      if (!content) return alert("Nh·∫≠p c·∫£m x√∫c tr∆∞·ªõc ƒë√£ nha!");

      db.collection("emotions").add({
        content,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        alert("C·∫£m x√∫c ƒë√£ ƒë∆∞·ª£c g·ª≠i üíï");
        document.getElementById("emotionInput").value = "";
        loadEmotions();
      }).catch(err => alert("L·ªói g·ª≠i c·∫£m x√∫c: " + err.message));
    }

    function loadEmotions() {
      const feed = document.getElementById("emotion-feed");
      feed.innerHTML = "ƒêang t·∫£i c·∫£m x√∫c...";
      db.collection("emotions").orderBy("timestamp", "desc").get().then(snapshot => {
        let html = "";
        snapshot.forEach(doc => {
          const data = doc.data();
          html += `<div style="margin-bottom: 10px; padding: 8px; border: 1px solid #ccc; border-radius: 8px; display: inline-block; max-width: 300px; background: #fdf1f5;">${data.content}</div>`;
        });
        feed.innerHTML = html || "Ch∆∞a c√≥ c·∫£m x√∫c n√†o ƒë∆∞·ª£c g·ª≠i üíî";
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      auth.onAuthStateChanged((user) => {
        if (user) {
          loadPhotos();
          loadEmotions();
        }
      });
    });
</script>
</body>
</html>
